(function(e){function t(t){for(var n,l,o=t[0],s=t[1],d=t[2],u=0,p=[];u<o.length;u++)l=o[u],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&p.push(a[l][0]),a[l]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);c&&c(t);while(p.length)p.shift()();return i.push.apply(i,d||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var s=r[o];0!==a[s]&&(n=!1)}n&&(i.splice(t--,1),e=l(l.s=r[0]))}return e}var n={},a={app:0},i=[];function l(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=n,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=s;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-primary font-sans",attrs:{id:"app"}},[r("div",{staticClass:"flex flex-wrap overflow-hidden bg-light-gray h-screen-minus-header w-full float-right"},[r("div",{staticClass:"w-1/6 pt-5 overflow-hidden border-gray-300 border-dashed border-r-2 pl-5"},[r("h1",{staticClass:"text-lg font-bold"},[e._v("Verfügbare Schichten")]),r("br"),r("draggable",{attrs:{group:{name:"layer",pull:"clone",put:!1},move:e.onMove,clone:e.onClone},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!0}},model:{value:e.providedLayerList,callback:function(t){e.providedLayerList=t},expression:"providedLayerList"}},e._l(e.providedLayerList,(function(e){return r("div",{key:e.type,staticClass:"flex"},[r("layer-preview",{attrs:{title:e.default_name}})],1)})),0)],1),r("div",{staticClass:"w-3/6 pb-28 pt-5 h-screen overflow-y-scroll pl-10"},[r("h1",{staticClass:"text-lg font-bold"},[e._v("Ausgewählte Schichten")]),r("br"),r("draggable",{attrs:{group:"layer",move:e.onMove},on:{start:function(t){e.drag=!1},end:function(t){e.drag=!0}},model:{value:e.selectedLayerList,callback:function(t){e.selectedLayerList=t},expression:"selectedLayerList"}},e._l(e.selectedLayerList,(function(t){return r("div",{key:t.id,staticClass:"flex"},[r("layer-node",{attrs:{"selected-layer-id":e.selectedLayer.id,layer:t},on:{"on-layer-select":e.onLayerSelect,"on-duplicate-layer":e.onDuplicateLayer,"on-delete-layer":e.onDeleteLayer}})],1)})),0)],1),r("div",{staticClass:"w-2/6 overflow-hidden pt-5 pl-10 bg-white"},[r("div",{staticClass:"flex flex-wrap overflow-hidden relative h-screen"},[r("div",{staticClass:"w-full min-h-full overflow-hidden flex-grow"},[r("layer-configuration",{attrs:{"invalid-state":e.invalidState,layer:e.selectedLayer},on:{"set-invalid-state":e.onInvalidStateToggle,"on-save":e.onSave}})],1)])])])])},i=[],l=(r("7db0"),r("c975"),r("a434"),r("b0c0"),r("c7cd"),r("b85c")),o=r("b76a"),s=r.n(o),d=r("2ef0"),c=r.n(d),u={name:"App",components:{draggable:s.a},data:function(){return{selectedLayer:{},invalidState:!1,idCursor:2,providedLayerList:[],selectedLayerList:[]}},created:function(){this.selectedLayerList=JSON.parse(document.getElementsByName("django_selected_layer_list")[0].value),this.providedLayerList=JSON.parse(document.getElementsByName("django_provided_layer_list")[0].value),this.selectedLayer=this.selectedLayerList.find((function(e){return 1===e.id}))},methods:{onMove:function(e){var t=e.draggedContext,r=e.relatedContext;return("undefined"==typeof t.element.fixed||!0!==t.element.fixed)&&("undefined"!=typeof r.element.first?1:"undefined"!=typeof r.element.last?-1:void 0)},onClone:function(e){this.idCursor+=1;var t,r=this.idCursor,n=[],a=Object(l["a"])(e.properties);try{for(a.s();!(t=a.n()).done;){var i=t.value,o={name:i.name,value:i.value.default_value};n.push(o)}}catch(u){a.e(u)}finally{a.f()}var s={type:e.type,properties:n},d=this.providedLayerList.find((function(t){return t.type===e.type})),c={id:r,name:e.default_name,layer_information:d,note:"",layer:s};return this.invalidState||this.setSelectedLayer(c),c},onInvalidStateToggle:function(e){this.invalidState=e},onLayerSelect:function(e){!0!==this.invalidState&&(this.invalidState=!1,this.setSelectedLayer(e))},onSave:function(){var e,t=[],r=Object(l["a"])(this.selectedLayerList);try{for(r.s();!(e=r.n()).done;){var n=e.value,a={};a.type=n.layer.type;var i,o=Object(l["a"])(n.layer.properties);try{for(o.s();!(i=o.n()).done;){var s=i.value;a[s.name]=s.value}}catch(d){o.e(d)}finally{o.f()}t.push(a)}}catch(d){r.e(d)}finally{r.f()}console.log(JSON.stringify(t,null,2))},onDeleteLayer:function(e){if(e.id>2){this.selectedLayer=this.selectedLayerList.find((function(e){return 1===e.id}));var t=this.selectedLayerList.indexOf(this.selectedLayerList.find((function(t){return t.id===e.id})));this.$delete(this.selectedLayerList,t)}},onDuplicateLayer:function(e){if(!(e.id<3)){var t=c.a.clone(e);this.idCursor+=1;var r=this.idCursor;t.id=r;var n=this.selectedLayerList.indexOf(e);this.selectedLayerList.splice(n,0,t)}},setSelectedLayer:function(e){this.selectedLayer=e}}},p=u,f=r("2877"),y=Object(f["a"])(p,a,i,!1,null,null,null),v=y.exports,h=(r("b972"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return"undefined"!==typeof e.layer?r("div",{staticClass:"flex shadow-md text-center bg-white mb-5 w-5/6 rounded-md hover:border-primary border-2 p-4",class:e.selectedLayerId===e.layer.id?"border-primary":"border-white"},[r("span",{on:{click:function(t){return e.$emit("on-layer-select",e.layer)}}},[r("svg",{staticClass:"fill-current text-icon-gray",attrs:{width:"27",height:"27",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[r("path",{attrs:{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"}})])]),r("div",{staticClass:"text-left select-none w-full"},[r("div",{on:{click:function(t){return e.$emit("on-layer-select",e.layer)}}},[r("p",{staticClass:"font-bold"},[e._v(e._s(e.layer.name))]),r("p",[e._v("Typ: "+e._s(e.layer.layer_information.type))]),e._l(e.layer.layer_information.properties,(function(t){return r("p",{key:t.name},[e._v(" "+e._s(t.description)+": "+e._s(Array.isArray(e.getProperty(t.name).value)?e.getProperty(t.name).value.join("x"):e.getProperty(t.name).value)+" ")])}))],2),r("div",{staticClass:"inline-flex space-x-2 text-icon-gray"},[r("a",{staticClass:"flex-1 cursor-pointer",on:{click:function(t){return e.$emit("on-delete-layer",e.layer)}}},[e._v("Löschen")]),r("svg",{staticClass:"inline self-center text-icon-gray fill-current",attrs:{width:"5",height:"5",viewBox:"0 0 120 120",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[r("circle",{attrs:{cx:"60",cy:"60",r:"50"}})]),r("div",{staticClass:"flex-1 cursor-pointer",on:{click:function(t){return e.$emit("on-duplicate-layer",e.layer)}}},[e._v("Duplizieren")])])])]):e._e()}),m=[],g=(r("a9e3"),{name:"LayerNode",props:{layer:Object,selectedLayerId:Number},methods:{getProperty:function(e){return this.layer.layer.properties.find((function(t){return t.name===e}))}}}),b=g,L=Object(f["a"])(b,h,m,!1,null,null,null),x=L.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"\n  flex\n  items-center\n  shadow-md\n  text-center\n  primary\n  bg-white\n  mb-5 h-20\n  w-5/6\n  rounded-md\n  hover:border-black\n  border-2\n  border-white\n  pl-2\n  "},[r("span",[r("svg",{staticClass:"fill-current text-icon-gray",attrs:{width:"27",height:"27",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[r("path",{attrs:{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"}})])]),r("p",{staticClass:"font-bold select-none"},[e._v(" "+e._s(e.title)+" ")])])},C=[],_={name:"LayerPreview",props:["title"]},S=_,P=Object(f["a"])(S,w,C,!1,null,"698613a8",null),O=P.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"text-lg font-bold"},[e._v("Konfiguration")]),r("br"),r("p",{staticClass:"text-icon-gray font-light mb-2"},[e._v("Titel")]),r("input",{staticClass:"w-2/3 bg-light-gray font-black p-3 rounded-md",attrs:{type:"text",name:e.layer.name},domProps:{value:e.layer.name},on:{change:e.onChangeName}}),r("br"),r("br"),r("p",{staticClass:"text-icon-gray font-light mb-2"},[e._v("Typ")]),r("input",{staticClass:"w-2/3 bg-light-gray font-black p-3 rounded-md",attrs:{type:"text",disabled:""},domProps:{value:e.layer.layer_information.type}}),r("br"),r("br"),r("form",[e._l(e.layer.layer_information.properties.filter((function(e){return!0===e.activated})),(function(t){return r("div",{key:t.name},[r("p",{staticClass:"text-icon-gray font-light mb-2"},[e._v(e._s(t.description)),r("br")]),"scalar"===t.value.type?r("div",["undefined"!==typeof t.value.step?r("input",{staticClass:"w-2/3 bg-light-gray font-black p-3 rounded-md",attrs:{type:"number",name:t.name,min:t.value.min,max:t.value.max,step:t.value.step},domProps:{value:e.getPropertyValue(t.name)},on:{change:function(r){return e.onChangeProperty(t.name,r)}}}):r("input",{staticClass:"w-2/3 bg-light-gray font-black p-3 rounded-md",attrs:{type:"number",name:t.name,min:t.value.min,max:t.value.max},domProps:{value:e.getPropertyValue(t.name)},on:{change:function(r){return e.onChangeProperty(t.name,r)}}})]):e._e(),"list"===t.value.type?r("div",[r("select",{staticClass:"w-2/3 bg-light-gray font-black p-3 rounded-md",attrs:{name:t.name},on:{change:function(r){return e.onChangeProperty(t.name,r)}}},e._l(t.value.possible_values,(function(t){return r("option",{key:t},[e._v(" "+e._s(t)+" ")])})),0),r("br")]):e._e(),"vector"===t.value.type?r("div",[r("input",{staticClass:"w-2/3 bg-light-gray font-black p-3 rounded-md",attrs:{type:"text",min:t.value.min,max:t.value.max,name:t.name},domProps:{value:e.getPropertyValueVector(t.name)},on:{change:function(r){return e.onChangePropertyVector(t.name,r)}}})]):e._e(),r("br")])})),r("button",{staticClass:"border-2 text-white bg-selected border-selected hover:bg-white hover:text-selected rounded-md p-2 disabled:opacity-0",attrs:{disabled:!0===e.invalidState},on:{click:function(t){return e.$emit("on-save")}}},[e._v("Speichern")])],2)])},k=[],E=(r("a15b"),r("d81d"),r("ac1f"),r("1276"),{name:"LayerConfiguration",props:{layer:Object,invalidState:Boolean},data:function(){return{borderClass:"border-2",borderRedClass:"border-red-500",currentSelectedElement:{}}},watch:{invalidState:function(e,t){!0===t&&!1===e&&this.removeColorBorderError(this.currentSelectedElement),!1===t&&!0===e&&this.addColorBorderError(this.currentSelectedElement)}},methods:{isInRange:function(e,t,r){return e>t&&e<r},addColorBorderError:function(e){e.classList.add(this.borderClass),e.classList.add(this.borderRedClass)},removeColorBorderError:function(e){e.classList.contains(this.borderClass)&&e.classList.contains(this.borderRedClass)&&(e.classList.remove(this.borderClass),e.classList.remove(this.borderRedClass))},validateInput:function(e,t,r,n){var a=!0;return this.isInRange(n,t,r)||(a=!1),this.$emit("set-invalid-state",!a),a},getPropertyValue:function(e){return this.layer.layer.properties.find((function(t){return t.name===e})).value},getPropertyValueVector:function(e){return this.layer.layer.properties.find((function(t){return t.name===e})).value.join("x")},onChangeProperty:function(e,t){var r=t.target.value,n=t.target.min,a=t.target.max;this.currentSelectedElement=t.target,"undefined"!==typeof n&&"undefined"!==typeof a&&this.validateInput(t.target,n,a,r),this.layer.layer.properties.find((function(t){return t.name===e})).value=t.target.value},onChangePropertyVector:function(e,t){var r="x",n=t.target.value.split(r).map((function(e){return parseInt(e)})),a=t.target.min,i=t.target.max;this.currentSelectedElement=t.target;var o,s=!0,d=Object(l["a"])(n);try{for(d.s();!(o=d.n()).done;){var c=o.value;this.isInRange(c,a,i)||(s=!1)}}catch(u){d.e(u)}finally{d.f()}this.$emit("set-invalid-state",!s),this.layer.layer.properties.find((function(t){return t.name===e})).value=n},onChangeName:function(e){this.layer.name=e.target.value}}}),M=E,$=Object(f["a"])(M,j,k,!1,null,null,null),B=$.exports;n["a"].component("layer-node",x),n["a"].component("layer-preview",O),n["a"].component("layer-configuration",B),n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(v)}}).$mount("#app")}});
//# sourceMappingURL=editor.app.js.map