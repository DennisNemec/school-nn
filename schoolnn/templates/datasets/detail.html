{% extends "base/base.html" %}
{% load static %}

{% block main %}
    <div class="p-10">
        <div class="flex justify-between mb-5">
            <h3 class="font-bold text-3xl">Datensatz: &bdquo;{{ dataset.name }}&ldquo;</h3>

            <div class="flex gap-6">
                <a class="cursor-pointer bg-selected p-3 pl-6 pr-6 rounded-xl text-white border-selected border-2 hover:border-selected hover:bg-white hover:text-selected shadow-md" href="javascript:history.back()">Zurück</a>
                <a href="/datasets/{{dataset.id}}/edit" class="flex mr-10 items-center cursor-pointer bg-selected p-3 pl-6 pr-6 rounded-xl text-white border-selected border-2 hover:border-selected hover:bg-white hover:text-selected shadow-md">
                    <p>Bearbeiten</p>
                </a>
            </div>
        </div>

        <div class="mb-5"> 
            <h3 class="font-bold text-lg">Allgemeines</h3>
            <div class="p-4">
                <div class="w-1/4">
                    <div class="flex flex-wrap justify-between w-full">
                        <label>ID:</label>
                        <input class="p-2 border border-primary rounded-lg mb-3" type="text" value="{{dataset.id}}" disabled>
                    </div>  

                    <div class="flex flex-wrap justify-between w-full">
                        <label>Name:</label>
                        <input class="p-2 border border-primary rounded-lg mb-3" name="name" type="text" value="{{dataset.name}}" disabled >
                    </div>

                    <div class="flex flex-wrap justify-between w-full">
                        <label>Ersteller:</label>
                        <input class="p-2 border border-primary rounded-lg mb-3" type="text"  value="{{dataset.user.name}}" disabled>
                    </div>

                    <div class="flex flex-wrap justify-between w-full">
                        <label>Benutzerdefiniert:</label>
                        <input class="p-2 border border-primary rounded-lg mb-3" type="text" value="{{dataset.custom}}" disabled>
                    </div>

                    <div class="flex flex-wrap justify-between w-full">
                        <label>Erstellt am:</label>
                        <input class="p-2 border border-primary rounded-lg mb-3" type="text" value="{{dataset.created_at}}" disabled>
                    </div>

                    <div class="flex flex-wrap justify-between w-full">
                        <label>Geändert am:</label>
                        <input class="p-2 border border-primary rounded-lg mb-3" type="text" value="{{dataset.updated_at}}" disabled>
                    </div>
                </div>
            </div>
        </div>

        <div class="w-full mb-4">
            <h3 class="font-bold text-lg">Unklassifizierte Bilder</h3>

            <div class="p-4"> 
                {% if unlabeled_count > 0 %}
                    <h3 class="text-md">Es sind {{ unlabeled_count }} Bilder unklassifiziert. Klicke auf Bearbeiten, um diese zu klassifizieren.</h3>
                {% else %}
                    <h3 class="text-md">Glückwunsch, alle Bilder sind klassifiziert!</h3>
                {% endif %}
            </div>
        </div>

        <div class="w-full">
            <h3 class="font-bold text-lg">Labels</h3>

            <div class="flex flex-wrap">
                {% for label in dataset.label_set.all %}
                    <div onclick="location = '/datasets/label/{{label.id}}/'" class="m-4 w-60 rounded shadow-lg flex-grow-0 flex-shrink-0 bg-white cursor-pointer border border- hover:border-selected hover:border-2">
                        <div class="w-full h-3/5">
                            {% if label.image_set.count > 0%}
                                <img alt="Kein Bild vorhanden" src="/images/{{ label.image_set.first.id }}" class="w-full h-full">
                            {% else %}
                                <p class="p-4">Keine Bilder vorhanden</p>
                            {% endif %}
                        </div>


                        <div class="flex-col w-full p-4">
                            <div class="border-b border-icon-gray">
                                <p class="font-bold text-lg">{{label.name}}</p>
                            </div>
                        </div>

                        <div class="pl-4 pr-4 w-full">
                            <table class="table-fixed text-primary mb-4 w-full">
                                <thead>
                                    <tr>
                                        <th class="w-2/3"></th>
                                        <th class="w-1/3"></th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td>Anzahl Bilder:</td>
                                        <td class="font-bold">{{label.image_set.count}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>

        <p>
            <a href="/datasets/list">Liste</a>
            <a href="edit/">Edit</a>
            <a href="delete/">Delete</a>
        </p>
    </div>
{% endblock %}
