{% extends "base/base.html" %}
{% load static %}

{% load breadcrumbs %}

{% block title %}Datensatz {{dataset.name}}{% endblock %}

{% block breadcrumbs %}
    {% breadcrumb_url "Datensätze" "dataset-list" %}
    {% url "dataset-detail" dataset.id as detail_url %}
    {% breadcrumb dataset.name detail_url %}
{% endblock %}

{% block top %}
    <h1>Datensatz: &bdquo;{{ dataset.name }}&ldquo;</h1>
    <a class="button-standard" href="{% url "dataset-edit" pk=dataset.id %}">Bearbeiten</a>
{% endblock %}

{% block main %}
    <section class="card mb-5">
        <div class="flex items-center space-x-4 mb-6">
            <img class="h-6 w-6" src="{% static "assets/icons/documents.svg" %}">
            <h3>Allgemeines</h3>
        </div>
        <table class="w-full md:w-1/2 xl:w-2/5">
            <tr>
                <td class="font-semibold">ID</td>
                <td>{{ dataset.id }}</td>
            </tr>
            <tr>
                <td class="font-semibold">Ersteller</td>
                <td>{{ dataset.user.username }}</td>
            </tr>
            <tr>
                <td class="font-semibold">Erstellt am</td>
                <td>{{ dataset.created_at | date:"d.m.Y \u\m H:i"}}</td>
            </tr>
            <tr>
                <td class="font-semibold">Zuletzt geändert am</td>
                <td>
                    {% if dataset.created_at|date:"U" == dataset.updated_at|date:"U" %}
                        Noch nie bearbeitet
                    {% else %}
                        {{ dataset.updated_at | date:"d.m.Y \u\m H:i" }}
                    {% endif %}
                </td>
            </tr>
        </table>
    </section>

    <section class="card w-full mb-4">
        <div class="flex items-center space-x-4 mb-6">
            <img class="h-6 w-6" src="{% static "assets/icons/documents.svg" %}">
            <h3>Unklassifizierte Bilder</h3>
        </div>

        <div class="p-4"> 
            {% if unlabeled_count > 0 %}
                <p>Es sind <strong>{{ unlabeled_count }}</strong> Bilder unklassifiziert. Klicke auf Bearbeiten, um diese zu klassifizieren.</p>
            {% else %}
                <p>Glückwunsch, alle Bilder sind klassifiziert!</p>
            {% endif %}
        </div>
    </section>

    <section class="w-full card">
        <div class="flex items-center space-x-4 mb-6">
            <img class="h-6 w-6" src="{% static "assets/icons/documents.svg" %}">
            <h3>Labels</h3>
        </div>

        <div class="flex flex-wrap">
            {% include "datasets/partials/label_list.html" with labels=dataset.label_set.all %}
        </div>
    </section>
{% endblock %}
